Viewer = require './viewer'

OBO = window.OBO
Editor = window.Editor

FocusableCommandHandler = Editor.chunk.focusableChunk.FocusableCommandHandler
FocusableSelectionHandler = Common.chunk.focusableChunk.FocusableSelectionHandler
FocusableChunk = Common.chunk.FocusableChunk

commandHandler = new FocusableCommandHandler()
selectionHandler = new FocusableSelectionHandler()

Error = React.createClass
	statics:
		type: 'ObojoboDraft.Chunks.Error'
		register: -> OBO.registerChunk Error, { error:true }
		getCommandHandler: -> commandHandler
		getSelectionHandler: -> selectionHandler

		createNewNodeData: Viewer.createNewNodeData
		cloneNodeData: Viewer.cloneNodeData
		createNodeDataFromDescriptor: Viewer.createNodeDataFromDescriptor
		getDataDescriptor: Viewer.getDataDescriptor

	componentDidUpdate: ->
		@props.chunk.markUpdated()

	render: ->
		`<FocusableChunk className='obojobo-draft--chunks--error viewer' shouldPreventTab={this.props.shouldPreventTab}>
			{'Missing Chunk'}
		</FocusableChunk>`


Error.register()

module.exports = Error