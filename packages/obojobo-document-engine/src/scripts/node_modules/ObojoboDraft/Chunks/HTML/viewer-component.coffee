require './viewer-component.scss'

katex = require 'katex'

Common = window.ObojoboDraft.Common
OboComponent = Common.components.OboComponent

HTML = React.createClass
	createMarkup: ->
		return { __html: @props.model.modelState.html }

	componentDidMount: ->
		latexes = ReactDOM.findDOMNode(@).querySelectorAll('.latex')
		for el in latexes
			el.innerHTML = katex.renderToString el.innerHTML

	render: ->
		data = @props.model.modelState

		`<OboComponent model={this.props.model}>
			<div className='obojobo-draft--chunks--html viewer pad' dangerouslySetInnerHTML={this.createMarkup()} />
		</OboComponent>`


module.exports = HTML