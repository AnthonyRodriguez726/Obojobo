ListStyles = require './liststyles'

Common = window.ObojoboDraft.Common

TextGroup = Common.textGroup.TextGroup
TextGroupAdapter = Common.chunk.textChunk.TextGroupAdapter

Adapter =
	construct: (model, attrs) ->
		TextGroupAdapter.construct model, attrs

		if attrs?.content?.listStyles?
			model.modelState.listStyles = ListStyles.fromDescriptor attrs.content.listStyles
		else
			model.modelState.listStyles = new ListStyles('unordered')

	clone: (model, clone) ->
		TextGroupAdapter.clone model, clone
		clone.modelState.listStyles = model.modelState.listStyles.clone()

	toJSON: (model, json) ->
		TextGroupAdapter.toJSON model, json
		json.content.listStyles = model.modelState.listStyles.toDescriptor()

	toText: (model) ->
		console.log('@TODO - List toText method')
		text = ''
		for textItem in model.modelState.textGroup.items
			text += '  * ' + textItem.text.value + "\n"

		text


module.exports = Adapter