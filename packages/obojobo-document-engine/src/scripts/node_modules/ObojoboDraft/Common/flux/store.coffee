Dispatcher = require './dispatcher'

class Store
	constructor: (name) ->
		@name = name

	init: ->
		@state = {}

	triggerChange: -> Dispatcher.trigger "#{@name}:change"
	onChange: (callback) -> Dispatcher.on "#{@name}:change", callback
	offChange: (callback) -> Dispatcher.off "#{@name}:change", callback
	setAndTrigger: (keyValues) ->
		Object.assign(@state, keyValues) # merge args onto defaults
		@triggerChange()
	getState: ->
		Object.assign {}, @state
	setState: (newState) ->
		@state = Object.assign {}, newState

module.exports = Store
