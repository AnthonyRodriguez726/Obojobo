Store = require 'ObojoboDraft/Common/flux/store'
Dispatcher = require 'ObojoboDraft/Common/flux/dispatcher'


class ModalStore extends Store
	constructor: ->
		super('modalstore')

		@state = {
			modals: []
		}

		Dispatcher.on 'modal:show', (payload) =>
			@state.modals.push payload.value.component
			@triggerChange()

		Dispatcher.on 'modal:hide', =>
			@state.modals.shift()
			@triggerChange()

	getState: -> @state

	setState: (newState) -> @state = newState


modalStore = new ModalStore()
module.exports = modalStore
