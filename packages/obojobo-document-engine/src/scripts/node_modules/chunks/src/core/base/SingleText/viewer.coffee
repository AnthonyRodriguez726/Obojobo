require './viewer.scss'

ObojoboDraft = window.ObojoboDraft
TextGroup = ObojoboDraft.text.TextGroup
Text = ObojoboDraft.components.Text
TextChunk = ObojoboDraft.components.TextChunk

commandHandler = null

SingleText = React.createClass
	statics:
		type: 'ObojoboDraft.Chunks.SingleText'
		register: -> OBO.registerChunk SingleText, { default:true }
		getCommandHandler: (chunk) -> commandHandler

		createNodeDataFromDescriptor: (descriptor) ->
			textGroup: TextGroup.fromDescriptor descriptor.content.textGroup, Infinity
			indent: descriptor.content.indent
			type: descriptor.content.type

	render: ->
		data = @props.chunk.componentContent

		console.log 'RENDER SINGLETEXT', data.textGroup.items.length

		texts = data.textGroup.items.map (textItem, index) ->
			console.log 'found', textItem, index
			`<Text text={textItem.text} groupIndex={index} />`

		`<TextChunk className="obojobo-draft--chunks--single-text pad" indent={data.indent}>
			<p>{texts}</p>
		</TextChunk>`



module.exports = SingleText