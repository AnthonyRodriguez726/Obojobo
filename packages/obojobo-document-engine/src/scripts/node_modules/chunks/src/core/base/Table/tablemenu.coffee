require './tablemenu.scss'

ObojoboDraft = window.ObojoboDraft
Assets = ObojoboDraft.Assets

icon = ObojoboDraft.util.getBackgroundImage require('svg-url?noquotes!./assets/table-menu-icon.svg')

TableMenu = React.createClass
	getDefaultProps: ->
		row: null
		col: null
		type: null
		onMenuCommand: ->

	onClick: (cmd) ->
		event.preventDefault()
		event.stopPropagation()

		@props.onMenuCommand {
			row: @props.row
			col: @props.col
			command: cmd
		}

		false

	render: ->
		switch @props.type
			when 'row' then @renderRow()
			when 'col' then @renderCol()
			else null

	renderRow: ->
		styles =
			backgroundImage: icon

		`<div className="obojobo-draft--chunks--table--table-menu row" style={styles}>
			<ul>
				<li className="insert-above" onClick={this.onClick.bind(null, 'insertRowAbove')}>Insert 1 row above</li>
				<li className="insert-below" onClick={this.onClick.bind(null, 'insertRowBelow')}>Insert 1 row below</li>
				<li className="delete" onClick={this.onClick.bind(null, 'deleteRow')}>Delete this row</li>
			</ul>
		</div>`

	renderCol: ->
		styles =
			backgroundImage: icon

		`<div className="obojobo-draft--chunks--table--table-menu col" style={styles}>
			<ul>
				<li className="insert-left" onClick={this.onClick.bind(null, 'insertColLeft')}>Insert 1 column left</li>
				<li className="insert-right" onClick={this.onClick.bind(null, 'insertColRight')}>Insert 1 column right</li>
				<li className="delete" onClick={this.onClick.bind(null, 'deleteCol')}>Delete this column</li>
			</ul>
		</div>`


module.exports = TableMenu