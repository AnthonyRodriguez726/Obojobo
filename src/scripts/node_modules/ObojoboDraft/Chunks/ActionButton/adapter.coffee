TextGroup = require 'ObojoboDraft/Common/textgroup/textgroup'

TextGroupAdapter =
	construct: (model, attrs) ->
		if attrs?.content?.textGroup?
			model.modelState.textGroup = TextGroup.fromDescriptor attrs.content.textGroup, Infinity, { indent:0 }
		else
			model.modelState.textGroup = TextGroup.create(Infinity, { indent:0 })

		if attrs?.content?.label
			model.modelState.label = attrs.content.label
		else
			model.modelState.label = ''

		if attrs?.content?.align
			model.modelState.align = attrs.content.align
		else
			model.modelState.align = 'center'

	clone: (model, clone) ->
		clone.modelState.textGroup = model.modelState.textGroup.clone()
		clone.modelState.label = model.modelState.label
		clone.modelState.align = model.modelState.align

	toJSON: (model, json) ->
		json.content.textGroup = model.modelState.textGroup.toDescriptor()
		json.content.label = model.modelState.label
		json.content.align = model.modelState.align

	toText: (model) ->
		model.modelState.textGroup.first.text.value


module.exports = TextGroupAdapter