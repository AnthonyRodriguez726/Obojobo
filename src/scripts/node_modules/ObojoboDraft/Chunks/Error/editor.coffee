require './error.scss'

ObojoboDraft = require 'ObojoboDraft'

FocusableCommandHandler = ObojoboDraft.command.FocusableCommandHandler
POS = ObojoboDraft.text.TextPositionMethods
Chunk = ObojoboDraft.models.Chunk
FocusableChunk = ObojoboDraft.components.FocusableChunk
SingleInputBubble = ObojoboDraft.components.modal.bubble.SingleInputBubble
Keyboard = ObojoboDraft.util.Keyboard
DeleteButton = ObojoboDraft.components.DeleteButton

Error = React.createClass
	statics:
		consumableElements: []
		commandHandler: new FocusableCommandHandler
		insertLabel: ['Error']
		onInsert: (position, referenceChunk, selection, opts, callback) ->
			newChunk = Chunk.create @

			switch position
				when 'before'
					referenceChunk.addBefore newChunk

				when 'after'
					referenceChunk.addAfter newChunk

			newChunk.selectStart selection

			callback()

		# OBONODE DATA METHODS
		# ================================================
		createNewNodeData: ->
			{}

		cloneNodeData: (data) ->
			{}

		# SERIALIZATION/DECODE METHODS
		# ================================================
		createNodeDataFromDescriptor: (descriptor) ->
			{}

		getDataDescriptor: (chunk) ->
			{}

		# HTML METHODS
		# ================================================
		createNewNodesFromElement: (el) ->
			null

	componentDidUpdate: ->
		@props.chunk.markUpdated()

	render: ->
		console.log @props.chunk.toJSON()
		`<FocusableChunk className='obojobo-draft--chunks--error'>
			{'Missing Chunk type: ' + this.props.chunk.get('type')}
		</FocusableChunk>`


module.exports = Error