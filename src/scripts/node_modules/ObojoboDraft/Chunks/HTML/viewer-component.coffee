require './viewer-component.scss'

katex = require 'katex'

Common = window.ObojoboDraft.Common
OboComponent = Common.components.OboComponent

HTML = React.createClass
	createMarkup: ->
		div = document.createElement 'div'
		div.innerHTML = @props.model.modelState.html

		latexes = div.querySelectorAll('.latex')

		for el in latexes
			el.innerHTML = katex.renderToString el.innerHTML

		return { __html:div.innerHTML  }

	render: ->
		data = @props.model.modelState

		`<OboComponent model={this.props.model} moduleData={this.props.moduleData}>
			<div className='obojobo-draft--chunks--html viewer pad' dangerouslySetInnerHTML={this.createMarkup()} />
		</OboComponent>`


module.exports = HTML