require './viewer.scss'

Common = window.ObojoboDraft.Common
FocusableSelectionHandler = Common.chunk.focusableChunk.FocusableSelectionHandler

selectionHandler = new FocusableSelectionHandler()

YouTube = React.createClass
	statics:
		type: 'ObojoboDraft.Chunks.YouTube'
		register: -> OBO.registerChunk YouTube
		label: 'YouTube Video'
		getSelectionHandler: -> selectionHandler

		createNewNodeData: ->
			videoId: null

		cloneNodeData: (data) ->
			videoId: data.videoId

		createNodeDataFromDescriptor: (descriptor) ->
			videoId: descriptor.content.videoId

		getDataDescriptor: (chunk) ->
			videoId: chunk.modelState.videoId

	render: ->
		data = @props.chunk.modelState

		`<div className='obojobo-draft--chunks--you-tube viewer'>
			<iframe src={'https://www.youtube.com/embed/' + data.videoId} frameBorder="0" allowFullScreen="true" />
		</div>`


YouTube.register()

module.exports = YouTube