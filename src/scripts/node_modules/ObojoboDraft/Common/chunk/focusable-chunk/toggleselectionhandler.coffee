BaseSelectionHandler = require 'ObojoboDraft/Common/chunk/base-selection-handler'

FocusableSelectionHandler = require './focusableselectionhandler'

class ToggleSelectionHandler extends BaseSelectionHandler
	constructor: (textSelectionHandler, focusSelectionHandler = new FocusableSelectionHandler()) ->
		super()

		@textSelectionHandler = textSelectionHandler
		@focusSelectionHandler = focusSelectionHandler

	getCopyOfSelection: (selection, chunk, cloneId) ->
		if chunk.isEditing()
			@textSelectionHandler.getCopyOfSelection.apply this, arguments
		else
			@focusSelectionHandler.getCopyOfSelection.apply this, arguments

	selectAll: (selection, chunk) ->
		if chunk.isEditing()
			@textSelectionHandler.selectAll.apply this, arguments
		else
			@focusSelectionHandler.selectAll.apply this, arguments

	selectStart: (selection, chunk, asRange = false) ->
		if chunk.isEditing()
			@textSelectionHandler.selectStart.apply this, arguments
		else
			@focusSelectionHandler.selectStart.apply this, arguments

	selectEnd: (selection, chunk, asRange = false) ->
		if chunk.isEditing()
			@textSelectionHandler.selectEnd.apply this, arguments
		else
			@focusSelectionHandler.selectEnd.apply this, arguments

	getVirtualSelectionStartData: (selection, chunk, text, html) ->
		if chunk.isEditing()
			@textSelectionHandler.getVirtualSelectionStartData.apply this, arguments
		else
			@focusSelectionHandler.getVirtualSelectionStartData.apply this, arguments

	getVirtualSelectionEndData: (selection, chunk, text, html) ->
		if chunk.isEditing()
			@textSelectionHandler.getVirtualSelectionEndData.apply this, arguments
		else
			@focusSelectionHandler.getVirtualSelectionEndData.apply this, arguments

	getDOMSelectionStart: (selection, chunk, text, html) ->
		if chunk.isEditing()
			@textSelectionHandler.getDOMSelectionStart.apply this, arguments
		else
			@focusSelectionHandler.getDOMSelectionStart.apply this, arguments

	getDOMSelectionEnd: (selection, chunk, text, html) ->
		if chunk.isEditing()
			@textSelectionHandler.getDOMSelectionEnd.apply this, arguments
		else
			@focusSelectionHandler.getDOMSelectionEnd.apply this, arguments

	areCursorsEquivalent: (selection, chunk, text, html) ->
		if chunk.isEditing()
			@textSelectionHandler.areCursorsEquivalent.apply this, arguments
		else
			@focusSelectionHandler.areCursorsEquivalent.apply this, arguments


module.exports = ToggleSelectionHandler