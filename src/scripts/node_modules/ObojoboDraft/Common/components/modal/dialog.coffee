require './dialog.scss'

Button = require 'ObojoboDraft/Common/components/button'
DeleteButton = require 'ObojoboDraft/Common/components/deletebutton'
Modal = require './modal'

module.exports = React.createClass
	getDefaultProps: ->
		centered: true

	componentDidMount: ->
		for button, index in @props.buttons
			if button.default
				@refs['button' + index].focus()

	focusOnFirstElement: ->
		@refs.button0.focus()

	render: ->
		`<div className="obojobo-draft--components--modal--dialog">
			<Modal onClose={this.props.onClose} focusOnFirstElement={this.focusOnFirstElement}>
				{
					this.props.title
					?
					<h1 className="heading" style={{textAlign:this.props.centered ? 'center' : null}}>{this.props.title}</h1>
					:
					null
				}
				<div className="dialog-content" style={{textAlign:this.props.centered ? 'center' : null}}>
					{this.props.children}
				</div>
				<div className="controls">
					{
						this.props.buttons.map((function(buttonProps, index) {
							buttonProps.key = index
							return <Button ref={'button' + index} {...buttonProps} />
						}).bind(this))
					}
				</div>
			</Modal>
		</div>`