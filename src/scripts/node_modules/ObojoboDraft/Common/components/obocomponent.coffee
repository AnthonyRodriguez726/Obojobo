FocusUtil = require 'ObojoboDraft/Common/util/focusutil'

OboComponent = React.createClass
	getDefaultProps: ->
		tag: 'div'

	componentDidMount: ->
		@props.model.processTrigger 'onMount'

	componentWillUnmount: ->
		@props.model.processTrigger 'onUnmount'

	render: ->
		Component = @props.model.getComponentClass()
		Tag = @props.tag

		className = 'component'
		if @props.className?
			className += ' ' + @props.className

		isFocussed = FocusUtil.getFocussedComponent(@props.moduleData.focusState) is @props.model

		`<Tag
			{...this.props}
			className={className}
			id={'obo-' + this.props.model.get('id')}
			data-obo-component
			data-id={this.props.model.get('id')}
			data-type={this.props.model.get('type')}
			data-focussed={isFocussed}
		>
			{this.props.children}
		</Tag>`


module.exports = OboComponent