require './viewer-component.scss'

Common = window.ObojoboDraft.Common

OboComponent = Common.components.OboComponent
NavUtil = window.Viewer.util.NavUtil

module.exports = React.createClass
	componentWillReceiveProps: (nextProps) ->
		if nextProps.moduleData.navState.navTargetId isnt @props.moduleData.navState.navTargetId
			NavUtil.setFlag @props.moduleData.navState.navTargetId, 'visited', true

	render: ->
		`<OboComponent
			model={this.props.model}
			moduleData={this.props.moduleData}
			className="obojobo-draft--pages--page"
		>
			{
				this.props.model.children.models.map((function(child, index) {
					var Component = child.getComponentClass()

					return <Component key={index} model={child} moduleData={this.props.moduleData} />
				}).bind(this))
			}
		</OboComponent>`