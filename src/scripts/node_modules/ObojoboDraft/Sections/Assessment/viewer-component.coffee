require './viewer-component.scss'

Common = window.ObojoboDraft.Common

OboComponent = Common.components.OboComponent

module.exports = React.createClass
	getInitialState: ->
		score: null
		submitted: false

	submit: ->
		# @setState { score:100 }
		@setState { submitted:true }

	render: ->
		`<OboComponent
			model={this.props.model}
			className="obojobo-draft--sections--assessment"
		>
			{
				this.props.model.children.models.map((function(child, index) {
					var Component = child.getComponentClass()

					return <Component key={index} model={child} showScore={this.state.score !== null} />
				}).bind(this))
			}
			{
				this.state.score === null
				?
				null
				:
				<div className="score">{this.state.score}</div>
			}

			<button onClick={this.submit}>Submit</button>
		</OboComponent>`