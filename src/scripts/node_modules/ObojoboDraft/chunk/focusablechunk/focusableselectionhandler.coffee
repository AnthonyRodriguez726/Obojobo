BaseSelectionHandler = require 'ObojoboDraft/chunk/baseselectionhandler'

class FocusableSelectionHandler extends BaseSelectionHandler
	getVirtualSelectionStartData: (selection, chunk) ->
		groupIndex: 'anchor:main'
		offset: 0

	getVirtualSelectionEndData: (selection, chunk) ->
		groupIndex: 'anchor:main'
		offset: 0

	getDOMSelectionStart: (selection, chunk) ->
		textNode: chunk.getDomEl().getElementsByClassName('anchor')[0].childNodes[0]
		offset: 0

	getDOMSelectionEnd: (selection, chunk) ->
		textNode: chunk.getDomEl().getElementsByClassName('anchor')[0].childNodes[0]
		offset: 0

	selectStart: (selection, chunk, asRange) ->
		selection.virtual.setStart chunk, { groupIndex:'anchor:main', offset:0 }
		if not asRange then selection.virtual.collapse()

	selectEnd: (selection, chunk, asRange) ->
		selection.virtual.setEnd chunk, { groupIndex:'anchor:main', offset:0 }
		if not asRange then selection.virtual.collapseToEnd()

	areCursorsEquivalent: (selectionWhichIsNullTODO, chunk, thisCursorData, otherCursorData) ->
		thisCursorData.offset is otherCursorData.offset and thisCursorData.groupIndex is otherCursorData.groupIndex


module.exports = FocusableSelectionHandler