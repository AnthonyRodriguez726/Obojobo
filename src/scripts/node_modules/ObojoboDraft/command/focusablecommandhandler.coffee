BaseCommandHandler = require './basecommandhandler'
Text = require 'ObojoboDraft/components/text'

module.exports = class FocusableCommandHandler extends BaseCommandHandler

	deleteText: (selection, chunk, deleteForwards) ->
		chunk.revert selection
		chunk.selectAll selection

	saveSelection: (selection, chunk, position) ->
		{ groupIndex:'anchor:main', offset:0 }

	restoreSelection: (selection, chunk, type, savedSelData) ->
		node = Text.getTextNode chunk, 'anchor:main'
		return null if not node?

		if type is 'start'
			selection.chunk.setTextStart node, 0
		else if type is 'end'
			selection.chunk.setTextEnd node, 0

	selectStart: (selection, chunk, asRange) ->
		selection.setFutureCaret chunk, { groupIndex:'anchor:main', offset:0 }

	selectEnd: (selection, chunk, asRange) ->
		selection.setFutureCaret chunk, { groupIndex:'anchor:main', offset:0 }