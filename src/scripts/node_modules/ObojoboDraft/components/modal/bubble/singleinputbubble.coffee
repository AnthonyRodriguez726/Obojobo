require './singleinputbubble.scss'

Bubble = require './bubble'

module.exports = React.createClass
	onChange: (event) ->
		@props.onChange event.target.value

	onSubmit: (event) ->
		event.preventDefault()
		@props.onClose()

	onKeyUp: (event) ->
		console.log event.keyCode
		if event.keyCode is 27 #ESC
			@props.onCancel()

	componentDidMount: ->
		setTimeout (->
			@refs.input.select()
		).bind(@)

	render: ->
		`<Bubble>
			<label className="single-input-bubble">
				<form className="interactable" onSubmit={this.onSubmit}>
					<input ref="input" type="text" value={this.props.value} onChange={this.onChange} onKeyUp={this.onKeyUp} />
					<button onClick={this.onSubmit}>Ok</button>
				</form>
				<span className="label">{this.props.label}</span>
			</label>
		</Bubble>`