ObjectAssign = require 'object-assign'

module.exports =
	createData: (data, template) ->
		clone = ObjectAssign {}, data

		for key of clone
			if not template[key]?
				delete clone[key]

		for key of template
			if not clone[key]?
				if typeof template[key] is 'object'
					clone[key] = ObjectAssign {}, template[key]
				else
					clone[key] = template[key]

		clone

	defaultCloneFn: (data) ->
		ObjectAssign {}, data

	defaultMergeFn: (consumer, digested) ->
		ObjectAssign consumer, digested