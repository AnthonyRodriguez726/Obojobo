require './nav.scss'

NavStore = require 'Viewer/stores/navstore'
img = require 'svg-url?noquotes!./hamburger.svg'

Dispatcher = window.ObojoboDraft.Common.flux.Dispatcher
getBackgroundImage = window.ObojoboDraft.Common.util.getBackgroundImage

Nav = React.createClass
	onClick: (item) ->
		Dispatcher.dispatch {
			type: 'navGoto',
			value: item.value
		}

	hideNav: ->
		Dispatcher.dispatch {
			type: 'navToggle'
		}

	render: ->
		# console.clear()
		console.log '_________NAV STATE'
		console.log @props, @props.navState.hidden
		`<div className={'viewer--components--nav' + (this.props.navState.locked ? ' is-locked' : ' is-unlocked') + (this.props.navState.open ? ' is-open' : ' is-closed') + (this.props.navState.disabled ? ' is-disabled' : ' is-enabled')}>
			<button className="toggle-button" onClick={this.hideNav}>open/close</button>
			<ul>
			{
				this.props.navState.items.map((function(item, index) {
					switch(item.type)
					{
						case 'link':
							var isSelected = this.props.navState.navTarget === item
							return <li key={index} className={'link' + (isSelected ? ' is-selected' : ' is-not-select')}><a onClick={this.onClick.bind(null, item)}>{item.label}</a></li>
							break;

						case 'seperator':
							return <li key={index} className='seperator'><hr /></li>
							break;

					}

				}).bind(this))
			}
			</ul>
		</div>`


module.exports = Nav