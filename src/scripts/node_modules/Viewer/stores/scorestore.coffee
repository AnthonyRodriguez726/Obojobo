Store = window.ObojoboDraft.Common.flux.Store
Dispatcher = window.ObojoboDraft.Common.flux.Dispatcher

state = {
	scores: {}
}

ScoreStore = Object.assign(new Store(),
	getState: -> state

	getScore: (model) ->
		score = state.scores[model.get('id')]
		if typeof score is 'undefined' then return null

		score
)

ScoreStore.dispatchToken = Dispatcher.register (payload) ->
	switch payload.type
		when 'setScore'
			console.log 'setScore', payload
			state.scores[payload.value.model.get('id')] = payload.value.score

		when 'clearScore'
			delete state.scores[payload.value.model.get('id')]

	ScoreStore.emitChange()


module.exports = ScoreStore