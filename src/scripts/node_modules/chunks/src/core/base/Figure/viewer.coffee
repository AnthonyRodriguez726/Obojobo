require './viewer.scss'

ObojoboDraft = window.ObojoboDraft
TextGroup = ObojoboDraft.text.TextGroup
Text = ObojoboDraft.components.Text
NonEditableChunk = ObojoboDraft.components.NonEditableChunk

commandHandler = null

Figure = React.createClass
	statics:
		type: 'ObojoboDraft.Chunks.Figure'
		register: ->
			OBO.registerChunk Figure

		getCommandHandler: (chunk) -> commandHandler

		createNodeDataFromDescriptor: (descriptor) ->
			textGroup: TextGroup.fromDescriptor descriptor.content.textGroup, 1
			url: descriptor.content.url
			size: descriptor.content.size

	render: ->
		data = @props.chunk.componentContent

		`<NonEditableChunk className={'obojobo-draft--chunks--figure viewer ' + data.size} ref="component">
			<div className="container">
				<figure unselectable="on">
					<img src={data.url} unselectable="on" />
					{
						data.textGroup.first.text.length > 0
						?
						<figcaption ref="caption">
							<Text text={data.textGroup.first.text} groupIndex="0" />
						</figcaption>
						:
						null
					}
				</figure>
			</div>
		</NonEditableChunk>`



module.exports = Figure