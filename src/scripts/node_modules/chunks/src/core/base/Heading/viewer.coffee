ObojoboDraft = window.ObojoboDraft
TextGroup = ObojoboDraft.textGroup.TextGroup
TextGroupEl = ObojoboDraft.chunk.textChunk.TextGroupEl
TextChunk = ObojoboDraft.chunk.TextChunk
SelectionHandler = ObojoboDraft.chunk.textChunk.TextGroupSelectionHandler

selectionHandler = new SelectionHandler()

Heading = React.createClass
	statics:
		type: 'ObojoboDraft.Chunks.Heading'
		register: -> OBO.registerChunk Heading
		getSelectionHandler: -> selectionHandler

		createNewNodeData: ->
			tg = TextGroup.create(1, { indent:0 })
			tg.first.text.styleText 'b'

			textGroup: tg
			headingLevel: 1

		cloneNodeData: (data) ->
			textGroup: data.textGroup.clone()
			headingLevel: data.headingLevel

		createNodeDataFromDescriptor: (descriptor) ->
			textGroup: TextGroup.fromDescriptor descriptor.content.textGroup, 1, { indent:0 }
			headingLevel: descriptor.content.headingLevel

		getDataDescriptor: (chunk) ->
			data = chunk.componentContent

			textGroup: data.textGroup.toDescriptor()
			headingLevel: data.headingLevel

	render: ->
		data = @props.chunk.componentContent

		inner = React.createElement('h' + data.headingLevel, null,
			`<TextGroupEl text={data.textGroup.first.text} indent={data.textGroup.first.data.indent} groupIndex="0" />`
		)

		`<TextChunk className='obojobo-draft--chunks--heading pad'>
			{inner}
		</TextChunk>`



module.exports = Heading