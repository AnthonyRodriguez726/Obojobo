Editor = window.Editor
ObojoboDraft = window.ObojoboDraft

TextGroupCommandHandler = Editor.command.TextGroupCommandHandler
TextGroupSelection = ObojoboDraft.text.TextGroupSelection

module.exports = class CommandHandler extends TextGroupCommandHandler
	onSelectAll: (selection, chunk) ->
		chunk.selectAll()
		true

	selectAll: (selection, chunk) ->
		tgs = new TextGroupSelection chunk, selection.virtual

		if tgs.type isnt 'multipleTextSpan'
			tgs.selectText tgs.start.groupIndex
		else
			tgs.selectGroup()

	split: (selection, chunk) -> false
	splitText: (selection, chunk, shiftKey) -> false

	deleteText: (selection, chunk, deleteForwards) ->
		tgs = new TextGroupSelection chunk, selection.virtual

		if not deleteForwards and tgs.start.isTextStart then return false
		if deleteForwards and tgs.start.isTextEnd then return false

		super selection, chunk, deleteForwards

	paste: (selection, chunk, text, html) ->
		@insertText selection, chunk, text
		true

	# styleSelection: (selection, chunk, styleType, styleData) ->
	# 	if styleType is 'a' then return false

	canMergeWith: (selection, digestedChunk, consumerChunk) -> false
	canRemoveSibling: (selection, sibling) -> false
	absorb: (selection, consumerChunk, digestedChunk) -> false