SideMenuList = require './sidemenu/sidemenulist'

MARGIN = 15
WIDTH = 30
HEIGHT = 30

SideMenu = React.createClass
	getInitialState: ->
		chunkRect: @props.selection.chunkRect

	componentWillReceiveProps: (nextProps) ->
		@setState {
			chunkRect: nextProps.selection.chunkRect
		}

	onBeforeClick: (componentClass) ->
		@props.handlerFn 'before', componentClass

	onAfterClick: (componentClass) ->
		@props.handlerFn 'after', componentClass

	render: ->
		chunkRect = @state.chunkRect

		if not chunkRect or not @props.controlsEl then return null

		ctrlRect = @props.controlsEl.getBoundingClientRect()

		`<div className="editor--components--side-menu">
			<SideMenuList inserts={this.props.inserts} onMouseDown={this.onBeforeClick} yPos={chunkRect.top - ctrlRect.top - MARGIN} />
			<SideMenuList inserts={this.props.inserts} onMouseDown={this.onAfterClick} yPos={chunkRect.bottom - ctrlRect.top - MARGIN} />
		</div>`


module.exports = SideMenu